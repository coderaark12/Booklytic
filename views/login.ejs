<%- include('partials/header-auth') %>

<div class="container mt-5">
  <h1 class="mb-4 text-center">Login</h1>

  <div class="row justify-content-center">
    <div class="col-sm-8 col-md-6">
      <div class="card shadow-lg">
        <div class="card-body">
          <!-- Makes POST request to /login route -->
          <form action="/login" method="POST" novalidate>
            <div class="form-group mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" name="username" id="email" placeholder="Enter your email" required>
              <div class="invalid-feedback">
                Please enter a valid email address.
              </div>
            </div>
            <div class="form-group mb-4">
              <label for="password" class="form-label">Password</label>
              <input type="password" class="form-control" name="password" id="password" placeholder="Enter your password" required>
              <div class="invalid-feedback">
                Please enter your password.
              </div>
            </div>

              <% if(locals.isPasswordCorrect === false) {%>
                <p class="text-danger text-center">Enter correct Password</p>
              <% } %>
              
            <button type="submit" class="btn btn-dark w-100 mb-3">Login</button>
          </form>

          <!-- Forgot Password link -->
          <div class="d-flex justify-content-between">
            <p>Don't have an account?  <a href="/register" class="link-primary text-decoration-none">Sign-Up</a></p>
            <a href="/forgotPassword" class="link-primary text-decoration-none">Forgot Password ?</a>
          </div>

        </div>
      </div>
    </div>

    <!-- Option to sign in with Google (can be uncommented if needed) -->
    <!--
    <div class="col-sm-4 col-md-3 mt-4 mt-md-0">
      <div class="card shadow-lg">
        <div class="card-body text-center">
          <a class="btn btn-outline-danger btn-block" href="/auth/google" role="button">
            <i class="fab fa-google me-2"></i>
            Sign in with Google
          </a>
        </div>
      </div>
    </div>
    -->

  </div>
</div>

<script>
// Bootstrap form validation
(function () {
  'use strict';
  var forms = document.querySelectorAll('form');

  Array.prototype.slice.call(forms).forEach(function (form) {
    form.addEventListener('submit', function (event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  });
})();
</script>


<%- include('partials/footer') %>
